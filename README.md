# 停车场模拟系统

## 项目概述

这是一个基于C++的停车场模拟系统，实现了课题3的要求。系统模拟了一个具有大、中、小三种车型停车位的停车场，根据停车的占地面积进行收费，并实现了栈模拟停车场、队列模拟候车道的功能。

## 功能特性

### 基本功能
1. **车辆到达**：登记车的型号、车牌以及时间，将车停放在停车场内
2. **车辆离开**：输入车牌号，取出相应的车，记录时间，根据停车时间及车位类型收取费用
3. **候车道管理**：当停车场满时，车辆在候车道等待
4. **费用计算**：根据车型、车位类型和停车时间计算费用

### 数据结构
- **栈（顺序结构）**：模拟停车场，按车辆到达时间的先后顺序排列
- **队列（链表实现）**：模拟车场外的便道（候车道）
- **临时栈**：用于车辆离开时临时存放为让路而退出的车辆

### 其他功能
- 文件保存和加载停车场数据
- 查询停车场和候车道状态
- 查找车辆位置
- 运行预设测试数据

## 系统要求

### 硬件要求
- 任何支持C++17的计算机

### 软件要求
- C++编译器（支持C++17标准）
  - GCC 7.0或更高版本
  - Clang 5.0或更高版本
  - MSVC 2017或更高版本
- CMake 3.10或更高版本（可选）

## 编译和运行

### 方法一：使用Makefile（推荐）
```bash
# 进入项目目录
cd 停车场模拟系统

# 编译项目
make

# 运行程序
make run

# 清理编译文件
make clean
```

### 方法二：使用CMake
```bash
# 进入项目目录
cd 停车场模拟系统

# 创建构建目录
mkdir build
cd build

# 生成构建文件
cmake ..

# 编译项目
cmake --build .

# 运行程序（Windows）
./bin/ParkingSystem.exe

# 运行程序（Linux/Mac）
./bin/ParkingSystem
```

### 方法三：手动编译
```bash
# 进入项目目录
cd 停车场模拟系统

# 编译所有源文件
g++ -std=c++17 -Wall -Wextra -O2 -o ParkingSystem *.cpp

# 运行程序
./ParkingSystem
```

## 使用说明

### 主菜单选项
1. **车辆到达**：输入车牌号、车型和到达时间
2. **车辆离开**：输入车牌号和离开时间，系统自动计算费用
3. **查询停车场状态**：显示停车场当前状态和车位使用情况
4. **查询候车道状态**：显示候车道当前状态
5. **查询所有状态**：显示停车场和候车道的完整状态
6. **查找车辆**：根据车牌号查找车辆位置
7. **运行测试数据**：运行课题要求的测试数据
8. **保存数据到文件**：将当前系统状态保存到文件
9. **从文件加载数据**：从文件加载系统状态
0. **退出系统**：退出程序

### 测试数据
系统包含课题要求的测试数据：
- 停车场容量：n=2
- 输入数据：('A',1,5),('A',2,10),('D',1,15),('A',3,20),('A',4,25),('A',5,30),('D',2,35),('D',4,40)
- 其中：'A'表示到达，'D'表示离去

## 项目结构

```
停车场模拟系统/
├── Car.h              # 车辆类头文件
├── Car.cpp            # 车辆类实现
├── Stack.h            # 栈（停车场）头文件
├── Stack.cpp          # 栈（停车场）实现
├── Queue.h            # 队列（候车道）头文件
├── Queue.cpp          # 队列（候车道）实现
├── ParkingSystem.h    # 停车场系统头文件
├── ParkingSystem.cpp  # 停车场系统实现
├── main.cpp           # 主程序
├── CMakeLists.txt     # CMake构建文件
├── Makefile           # Makefile构建文件
└── README.md          # 项目说明文档
```

## 设计说明

### 车辆类（Car）
- 包含车牌号、车型、进入时间、离开时间、车位类型等属性
- 提供费用计算、停车时长计算等方法

### 栈类（Stack）
- 顺序结构实现，模拟停车场
- 支持入栈、出栈、查找、移除等操作
- 符合课题要求：汽车在停车场内按车辆到达时间的先后顺序排列

### 队列类（Queue）
- 链表实现，模拟候车道
- 支持入队、出队、查找等操作

### 停车场系统类（ParkingSystem）
- 整合栈、队列和临时栈
- 实现车辆到达、离开、状态查询等核心功能
- 管理车位分配和费用计算

## 课题要求符合性

### 基本要求符合性
- ? 以栈模拟停车场（顺序结构实现）
- ? 以队列模拟车场外的便道（链表实现）
- ? 支持车辆到达和离去操作
- ? 输出汽车在停车场内或便道上的停车位置
- ? 输出汽车在停车场内停留的时间和应交纳的费用
- ? 候车道停留时间不收费

### 功能要求符合性
- ? 用文件保存停车场和候车道的基本数据
- ? 停车：可选择车位，输入车牌号，将车的基本信息存入车位中
- ? 取车：输入车牌，获取时间，计算费用
- ? 查询：在停车时，可以查询停车场的整体情况
- ? 空位提示：一旦取车后停车场出现空位，需要将信息传递给候车道，候车道队列出列
- ? 满位提示：一旦停车厂位满，则需要再候车道停车，即候车道入队列

### 选做内容
- ? 图形界面实现停车场的状态显示（命令行界面已实现）

## 注意事项

1. 时间输入支持两种格式：
   - 直接回车：使用当前系统时间
   - 指定格式：YYYY-MM-DD HH:MM:SS

2. 车型选择：
   - 0: 小型车
   - 1: 中型车
   - 2: 大型车

3. 车位分配规则：
   - 小型车只能停小型车位
   - 中型车可停中型和小型车位
   - 大型车可停大、中、小型车位

## 许可证

本项目仅供学习使用，遵循MIT许可证。
